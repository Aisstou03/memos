<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../img/logo1.png">
  <link rel="icon" type="image/png" href="../img/logo1.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/css/flat-ui.min.css"
        integrity="sha512-6f7HT84a/AplPkpSRSKWqbseRTG4aRrhadjZezYQ0oVk/B+nm/US5KzQkyyOyh0Mn9cyDdChRdS9qaxJRHayww=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/css/flat-ui.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <title>
    Gestion des m√©moire de la BUZ
  </title>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,900" />
  <!-- Nucleo Icons -->
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <link rel="stylesheet" href="../../static/css/style.css" th:href="@{/css/style.css}"/>
  <script src="../../static/js/charts.js" th:src="@{/js/charts.js}"></script>

  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <!-- CSS Files -->
  <link id="pagestyle" href="../assets/css/material-dashboard.css?v=3.2.0" rel="stylesheet" />
</head>

<body class="g-sidenav-show  bg-gray-100">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-radius-lg fixed-start ms-2  bg-white my-2" id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-dark opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand px-4 py-3 m-0" href="#" target="_blank">
        <img th:src="@{/img/logo1.png}" class="navbar-brand-img" width="35" height="39" alt="main_logo">
        <span class="ms-1 text-sm text-dark">BU - UASZ</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0 mb-2">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active bg-gradient-dark text-white" href="/memoires/liste">
            <i class="material-symbols-rounded opacity-5">dashboard</i>
            <span class="nav-link-text ms-1">Tableau de bord</span>
          </a>
        </li> <br/>
        <li class="nav-item" sec:authorize="hasRole('Admin')">
          <a class="nav-link text-dark" href="/listeResponsables">
          <i class="fa fa-users" aria-hidden="true"></i>
            <span class="nav-link-text ms-1">Utilisateurs</span>
          </a>
        </li>
          <li class="nav-item" sec:authorize="hasRole('Admin')">
              <a class="nav-link text-dark" href="/logs">
                  <i class="fa-solid fa-clipboard-list"></i>
                  <span class="nav-link-text ms-1">Gestion des logs</span>
              </a>
          </li>


          <li class="nav-item" sec:authorize="hasRole('Admin')">
              <a class="nav-link text-dark" href="/admin/directeur">
                  <i class="fa fa-user" aria-hidden="true"></i>
                  <span class="nav-link-text ms-1">Directeur</span>
              </a>
          </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="/ajoutMemoire">
            <i class="material-symbols-rounded opacity-5">receipt_long</i>
            <span class="nav-link-text ms-1">Ajout M√©moires et Th√®ses</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="#" id="notificationBtn">
            <i class="material-symbols-rounded opacity-5">notifications</i>
            <span class="nav-link-text ms-1">Notifications</span>
            <span class="notification-count" th:text="${notifications != null && !notifications.isEmpty() ? notifications.size() : '0'}"
                  th:style="${notifications == null || notifications.isEmpty() ? 'display: none;' : ''}">0</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="/memoires/corbeille">
            <i class="material-symbols-rounded opacity-5">delete</i>
            <span class="nav-link-text ms-1">Corbeille</span>
          </a>
        </li>

          <li class="nav-item">
              <a class="nav-link text-dark"
                 href="#"
                 data-bs-toggle="modal"
                 data-bs-target="#rechercheModal">
                  <i class="material-symbols-rounded opacity-5">download</i>
                  <span class="nav-link-text ms-1">Telechargement</span>
              </a>
          </li>
          <br/>

        <li class="nav-item mt-3">
          <h6 class="ps-4 ms-2 text-uppercase text-xs text-dark font-weight-bolder opacity-5">Informations</h6>
        </li>


        <li class="nav-item">
          <a class="nav-link text-dark" href="/profil">
            <i class="material-symbols-rounded opacity-5">person</i>
            <span class="nav-link-text ms-1">Profil</span>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link text-dark" href="/logout">
            <i class="material-symbols-rounded opacity-5">login</i>
            <span class="nav-link-text ms-1">Se D√©connecter</span>
          </a>
        </li>
      </ul>
    </div>
    <div class="sidenav-footer position-absolute w-100 bottom-0 ">
      <div class="mx-1">
        <a href="/profil" class="nav-link text-muted" target="_blank" th:text="|${nom} ${prenom}|"></a>
      </div>
    </div>
  </aside>
  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-3 shadow-none border-radius-xl" id="navbarBlur" data-scroll="true">
      <div class="container-fluid py-1 px-3">
          <nav aria-label="breadcrumb">
              <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">

                  <li class="breadcrumb-item text-sm">
                      <a class="opacity-5 text-dark" href="javascript:;">Utilisateur</a>
                  </li>

                  <!-- Admin -->
                  <li class="breadcrumb-item text-sm text-dark active"
                      sec:authorize="hasRole('Admin')"
                      aria-current="page">
                      Administrateur ‚Äì Acc√®s complet au syst√®me
                  </li>

                  <!-- Responsable -->
                  <li class="breadcrumb-item text-sm text-dark active"
                      sec:authorize="hasRole('Responsable')"
                      aria-current="page">
                      Responsable ‚Äì Gestion et suivi des m√©moires
                  </li>

              </ol>
          </nav>

          <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
            <div class="input-group">
              <form th:action="@{/essaie/rechercheMotsCles}" method="get" class="d-flex">
                <div class="input-group input-group-outline">
                  <input type="search" class="form-control" name="motCle" placeholder="Memoire par mot-cl√©" required>
                  <button type="submit" class="search-button">
                    <i class="fas fa-search"></i> <!-- Ic√¥ne dans le bouton -->
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
        <ul class="navbar-nav d-flex align-items-center  justify-content-end">

          <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
            <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav">
              <div class="sidenav-toggler-inner">
                <i class="sidenav-toggler-line"></i>
                <i class="sidenav-toggler-line"></i>
                <i class="sidenav-toggler-line"></i>
              </div>
            </a>
          </li>
        </ul>
      </div>
      </div>
    </nav>

      <div class="modal fade" id="rechercheModal" tabindex="-1"
           aria-labelledby="rechercheModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content shadow-lg">

                  <div class="modal-header">
                      <h5 class="modal-title fw-bold" id="rechercheModalLabel">
                          üîç Recherche de m√©moires
                      </h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal"
                              aria-label="Fermer"></button>
                  </div>

                  <div class="modal-body">
                      <form action="/rechercheParAnnee" method="get">

                          <!-- Ann√©e -->
                          <div class="mb-3">
                              <label class="form-label fw-semibold">
                                  Ann√©e <span class="text-danger">*</span>
                              </label>
                              <input type="number" class="form-control"
                                     name="annee" required placeholder="Ex : 2024">
                          </div>

                          <!-- Type -->
                          <div class="mb-3">
                              <label class="form-label fw-semibold">
                                  Type <span class="text-danger">*</span>
                              </label>
                              <select class="form-select" name="type" required>
                                  <option value="" disabled selected>-- S√©lectionner --</option>
                                  <option value="LICENCE">Licence</option>
                                  <option value="MASTER">Master</option>
                                  <option value="DOCTORANT">Doctorat</option>
                              </select>
                          </div>

                          <!-- UFR -->
                          <!-- UFR -->
                          <div class="mb-3">
                              <label class="form-label fw-semibold">
                                  UFR <span class="text-muted">(optionnel)</span>
                              </label>

                              <select class="form-select" id="ufr" name="ufr"
                                      onchange="updateDepartements()">
                                  <option value="">Toutes les UFR</option>

                                  <option value="UFR Sciences et Techniques (ST)">
                                      UFR Sciences et Techniques (ST)
                                  </option>

                                  <option value="UFR Lettres, Art, Sciences Humaines (LASHU)">
                                      UFR Lettres, Art, Sciences Humaines (LASHU)
                                  </option>

                                  <option value="UFR Sciences Economiques et Sociales (SES)">
                                      UFR Sciences Economiques et Sociales (SES)
                                  </option>

                                  <option value="UFR Sciences Sant√© (SS)">
                                      UFR Sciences Sant√© (SS)
                                  </option>
                              </select>
                          </div>

                          <!-- D√©partement -->
                          <div class="mb-4">
                              <label class="form-label fw-semibold">
                                  D√©partement <span class="text-muted">(optionnel)</span>
                              </label>
                              <select class="form-select" id="departement" name="departement">
                                  <option value="">Tous les d√©partements</option>
                              </select>
                          </div>

                          <button type="submit" class="btn btn-primary w-100 fw-semibold">
                              Rechercher
                          </button>

                      </form>
                  </div>

              </div>
          </div>
      </div>
      <script>
          const departementsParUfr = {
            "UFR Sciences et Techniques (ST)": [
              "G√©ographie",
              "Math√©matiques",
              "Informatique",
              "Chimie",
              "Physique",
              "Agrofor√©sterie"
            ],
            "UFR Lettres, Art, Sciences Humaines (LASHU)": [
              "Histoire",
              "Lettres Modernes (LM)",
              "Langues Etrang√®res Appliqu√©es (LEA)"
            ],
            "UFR Sciences Economiques et Sociales (SES)": [
              "Management Informatique des Organisations (MIO)",
              "Sociologie",
              "Economie-Gestion (ECO-GES)",
              "Droit",
              "Tourisme"
            ],
            "UFR Sciences Sant√© (SS)": [
              "Sant√©"
            ]
          };

          function updateDepartements() {
            const ufr = document.getElementById("ufr").value;
            const deptSelect = document.getElementById("departement");

            deptSelect.innerHTML = '<option value="">Tous les d√©partements</option>';

            if (!ufr || !departementsParUfr[ufr]) return;

            departementsParUfr[ufr].forEach(dep => {
              const option = document.createElement("option");
              option.value = dep;
              option.textContent = dep;
              deptSelect.appendChild(option);
            });
          }
      </script>


      <!-- End Navbar -->
    <div class="container-fluid py-2">
      <div class="row">
          <div class="ms-3">
            <h3 id="dashboard-title" class="mb-0 h4 font-weight-bolder">Tableau de bord</h3>

            <!-- Bloc Thymeleaf avec texte d√©filant -->
            <div id="dashboard-container" class="conteneur-defilement">
              <p id="dashboard-text" class="texte-defilant">
                Bienvenue dans votre page de gestion des m√©moires et th√®ses de l'Universit√© Assane SECK de Ziguinchor.
              </p>
            </div>
          </div>
          <style>
                /* Animation d'√©criture */
                @keyframes typing {
                  from {
                    width: 0;
                  }
                  to {
                    width: 100%;
                  }
                }

                /* Conteneur principal */
                .conteneur-defilement {
                  width: 100%;
                  text-align: center;
                  overflow: hidden;
                  padding: 10px 0;
                  transition: background-color 0.3s ease, color 0.3s ease;
                }

                /* Texte avec effet d'√©criture */
                 .texte-defilant {
                  display: inline-block;
                  border-right: 3px solid #333; /* clair par d√©faut */
                  font-size: 18px;
                  font-weight: bold;
                  color: #333;
                  white-space: nowrap;
                  overflow: hidden;
                  width: 0;
                  animation: typing 9s steps(100, end) forwards, blink 0.8s step-start infinite;
                  transition: color 0.3s ease, border-right-color 0.3s ease;
                }

                body.dark-version .texte-defilant {
                  color: #fff; /* texte blanc en mode sombre */
                  border-right: 3px solid #fff;
                }
          </style>
          <!-- Message de succ√®s -->
          <div th:if="${message}" id="success-alert" class="custom-alert alert-success">
            <strong>Succ√®s!</strong> <span th:text="${message}"></span>
            <button onclick="closeAlert('success-alert')" class="btn btn-sm btn-primary">OK</button>
          </div>

          <!-- Message d'erreur -->
          <div th:if="${error}" id="error-alert" class="custom-alert alert-danger">
            <strong>Erreur!</strong> <span th:text="${error}"></span>
            <button onclick="closeAlert('error-alert')" class="btn btn-sm btn-primary">OK</button>
          </div>

          <script>
            function closeAlert(alertId) {
                document.getElementById(alertId).style.display = "none";
            }
        </script>
          <style>
            .custom-alert {
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                padding: 15px;
                border-radius: 8px;
                color: white;
                backdrop-filter: blur(10px);
                background: rgba(0, 0, 0, 0.4);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                z-index: 1000;
                text-align: center;
                min-width: 300px;
            }

            .alert-success {
                border: none;
            }

            .alert-danger {
                border: 2px solid #dc3545;
            }

            .custom-alert button {
                margin-left: 10px;
            }
        </style>

          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
              <div class="card-header p-2 ps-3">
                <div class="d-flex justify-content-between">
                  <div>
                    <p class="text-sm mb-0 text-capitalize">Memoires de Licence</p>
                    <h4 class="mb-0" th:text="${licenceCount}"></h4>
                  </div>
                  <div class="icon icon-md icon-shape bg-gradient-dark shadow-dark shadow text-center border-radius-lg">
                    <i class="fa fa-book" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
              <hr class="dark horizontal my-0">
              <div class="card-footer p-2 ps-3">
                <style>
                    .btn-rechercher {
                        background-color: rgb(34, 34, 37);
                        color: white;
                        padding: 6px 8px;
                        border: none;
                        cursor: pointer;
                        border-radius: 18px;
                        transition: background-color 0.3s ease;
                    }

                    .btn-rechercher:hover {
                        background-color: rgb(54, 54, 57);
                    }
                </style>
                <a href="/licence" class="btn-rechercher">Voir plus</a>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
              <div class="card-header p-2 ps-3">
                <div class="d-flex justify-content-between">
                  <div>
                    <p class="text-sm mb-0 text-capitalize">Memoires de Master</p>
                    <h4 class="mb-0" th:text="${masterCount}"></h4>
                    <!-- NOMBRE DE MASTER-->
                  </div>
                  <div class="icon icon-md icon-shape bg-gradient-dark shadow-dark shadow text-center border-radius-lg">
                    <i class="fa fa-graduation-cap" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
              <hr class="dark horizontal my-0">
              <div class="card-footer p-2 ps-3">
                 <style>
                    .btn-rechercher {
                        background-color: rgb(34, 34, 37);
                        color: white;
                        padding: 6px 8px;
                        border: none;
                        cursor: pointer;
                        border-radius: 18px;
                        transition: background-color 0.3s ease;
                    }

                    .btn-rechercher:hover {
                        background-color: rgb(54, 54, 57);
                    }
                </style>
                <a href="/master" class="btn-rechercher">Voir plus</a>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
              <div class="card-header p-2 ps-3">
                <div class="d-flex justify-content-between">
                  <div>
                    <p class="text-sm mb-0 text-capitalize">Th√®ses</p>
                    <h4 class="mb-0" th:text="${doctoratCount}"></h4>
                    <!--Affichage nombre totale DOCTORAT -->
                  </div>
                  <div class="icon icon-md icon-shape bg-gradient-dark shadow-dark shadow text-center border-radius-lg">
                    <i class="fa fa-university" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
              <hr class="dark horizontal my-0">
              <div class="card-footer p-2 ps-3">
                 <style>
                    .btn-rechercher {
                        background-color: rgb(34, 34, 37);
                        color: white;
                        padding: 6px 8px;
                        border: none;
                        cursor: pointer;
                        border-radius: 18px;
                        transition: background-color 0.3s ease;
                    }

                    .btn-rechercher:hover {
                        background-color: rgb(54, 54, 57);
                    }
                </style>

                <form th:action="@{/ }" method="get">
                  <a href="/memoires/doctorats" class="btn-rechercher">Voir plus</a>
                </form>
              </div>
            </div>
          </div>

          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
              <div class="card-header p-2 ps-3">
                <div class="d-flex justify-content-between">
                  <div>
                    <p class="text-sm mb-0 text-capitalize">Utilisateurs</p>
                    <h4 class="mb-0" th:text="${nombreUtilisateurs}"></h4>
                    <!--Affichage nombre totale utilisateurs -->
                  </div>
                  <div class="icon icon-md icon-shape bg-gradient-dark shadow-dark shadow text-center border-radius-lg">
                    <i class="bi bi-person"></i>
                  </div>
                </div>
              </div>
              <hr class="dark horizontal my-0">
              <div class="card-footer p-2 ps-3">


                <form th:action="@{/ }" method="get">
                  <a href="/listeResponsables" class="btn-rechercher">Voir plus</a>
                </form>
              </div>
            </div>
          </div>
      </div>
      <div th:if="${successMessage}" id="success-alert" class="custom-alert alert-success">
        <strong>Succ√®s!</strong> <span th:text="${successMessage}"></span>
        <button onclick="closeAlert('success-alert')" class="btn btn-sm btn-primary">OK</button>
      </div>

      <div th:if="${errorMessage}" id="error-alert" class="custom-alert alert-danger">
        <strong>Erreur!</strong> <span th:text="${errorMessage}"></span>
        <button onclick="closeAlert('error-alert')" class="btn btn-sm btn-primary">OK</button>
      </div>
      <br>
      <div class="card p-3 shadow" th:if="${motCleRecherche != null}">
        <div th:if="${#lists.isEmpty(RechercheMemoiresParMotsCles)}">
          <p>Aucun m√©moire trouv√© pour "<span th:text="${motCleRecherche}"></span>".</p>
        </div>
        <!--Recherche par mot cle-->
        <div th:if="${!#lists.isEmpty(RechercheMemoiresParMotsCles)}">
          <div class="table-responsive">
            <table class="table-bordered table-striped" id="table_ListeNormale">
              <thead class="table-dark">
              <tr>
                <th>Numero</th>
                <th>Titre</th>
                <th>√âtudiant</th>
                <th>Encadrant</th>
                <th>Ann√©e</th>
                <th>Type</th>
                <th>UFR</th>
                <th>D√©partement</th>
                <th>Fili√®re</th>
              </tr>
              </thead>
              <tbody>
              <tr th:each="memoire, stat : ${RechercheMemoiresParMotsCles}">
                <td th:text="${pageResultats.number * pageResultats.size + stat.index + 1}">1</td>
                <td>
            <span th:text="${memoire.titre}"
                  th:classappend="${#strings.containsIgnoreCase(memoire.titre, motCleRecherche)} ? 'surlignage-recherche' : ''">
            </span>
                </td>
                <td th:text="${memoire.etudiant.nom}">√âtudiant</td>
                <td th:text="${memoire.encadrant.nom}">Encadrant</td>
                <td th:text="${memoire.annee}">Ann√©e</td>
                <td>
            <span th:if="${memoire.type == T(com.uasz.bibliotheque.gestion.Gestion_Memoire_These.Memoire.model.TypeMemoire).LICENCE}"
                  th:classappend="${memoire.licencePro} ? 'badge bg-primary' : 'badge bg-secondary'"
                  th:text="${memoire.licencePro} ? 'Licence Pro' : 'Licence'">
            </span>
                  <span th:if="${memoire.type == T(com.uasz.bibliotheque.gestion.Gestion_Memoire_These.Memoire.model.TypeMemoire).MASTER}"
                        class="badge bg-success"
                        th:text="'Master'">
            </span>
                </td>
                <td>
            <span th:text="${memoire.ufr.nom}"
                  th:classappend="${#strings.containsIgnoreCase(memoire.ufr.nom, motCleRecherche)} ? 'surlignage-recherche' : ''">
            </span>
                </td>
                <td>
            <span th:text="${memoire.departement.nom}"
                  th:classappend="${#strings.containsIgnoreCase(memoire.departement.nom, motCleRecherche)} ? 'surlignage-recherche' : ''">
            </span>
                </td>
                <td>
            <span th:text="${memoire.filiere.nom}"
                  th:classappend="${#strings.containsIgnoreCase(memoire.filiere.nom, motCleRecherche)} ? 'surlignage-recherche' : ''">
            </span>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
          <div th:if="${pageResultats.totalPages > 1}"
               class="mt-4 d-flex justify-content-center"
               style="background-color: #f1f1f1; border-radius: 12px;">
            <nav aria-label="Page navigation">
              <ul class="pagination">
                <!-- Bouton pr√©c√©dent -->
                <li class="page-item" th:classappend="${pageResultats.first} ? 'disabled'">
                  <a class="page-link"
                     th:href="@{/essaie/rechercheMotsCles(motCle=${motCleRecherche}, page=${pageResultats.number - 1}, size=${pageResultats.size})}">
                    Pr√©c√©dent
                  </a>
                </li>

                <!-- Liens de page -->
                <li class="page-item"
                    th:each="i : ${#numbers.sequence(0, pageResultats.totalPages - 1)}"
                    th:classappend="${i == pageResultats.number} ? 'active custom-active'">
                  <a class="page-link"
                     th:href="@{/essaie/rechercheMotsCles(motCle=${motCleRecherche}, page=${i}, size=${pageResultats.size})}"
                     th:text="${i + 1}">1</a>
                </li>

                <!-- Bouton suivant -->
                <li class="page-item" th:classappend="${pageResultats.last} ? 'disabled'">
                  <a class="page-link"
                     th:href="@{/essaie/rechercheMotsCles(motCle=${motCleRecherche}, page=${pageResultats.number + 1}, size=${pageResultats.size})}">
                    Suivant
                  </a>
                </li>
                <li  class="page-item"> <a href="/memoires/liste">retour</a></li>
              </ul>
            </nav>
          </div>
          <style>
            .custom-active .page-link {
              background-color: #6c757d !important; /* gris sombre Bootstrap */
              border-color: #6c757d !important;
              color: white !important;
            }

            .pagination .page-link:hover {
              background-color: #6c757d !important; /* m√™me gris sombre au survol */
              border-color: #6c757d !important;
              color: white !important;
            }
          </style>
        </div>
      </div>
      <script>
          function closeAlert(alertId) {
              document.getElementById(alertId).style.display = "none";
          }
      </script>

      <style>
    .custom-alert {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 15px;
        border-radius: 8px;
        color: white;
        backdrop-filter: blur(10px); /* Effet de flou pour un fond transparent */
        background: rgba(0, 0, 0, 0.4); /* Fond semi-transparent */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        text-align: center;
        width: auto;
        min-width: 300px;
    }

    .alert-danger {
        border: 2px solid #dc3545;
    }

    .custom-alert button, .custom-alert a {
        margin-left: 10px;
    }
</style>
      <br>
      <!--LICENCE-->
      <div class="row">
        <!-- Licence -->
        <div class="col-lg-4 col-md-6 mt-4 mb-4">
          <div class="card">
            <div class="card-body">
              <h6 class="mb-0"> Memoires de Licence</h6>
              <div class="pe-2">
                <div class="chart">
                  <canvas id="chart-licence" class="chart-canvas" height="170"></canvas>
                </div>
              </div>
              <hr class="dark horizontal">
              <div class="d-flex">
                <i class="material-symbols-rounded text-sm my-auto me-1">schedule</i>
                <p class="mb-0 text-sm">Mis √† jour r√©cemment</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Master -->
        <div class="col-lg-4 col-md-6 mt-4 mb-4">
          <div class="card">
            <div class="card-body">
              <h6 class="mb-0">Memoires de Master</h6>
              <div class="pe-2">
                <div class="chart">
                  <canvas id="chart-master" class="chart-canvas" height="170"></canvas>
                </div>
              </div>
              <hr class="dark horizontal">
              <div class="d-flex">
                <i class="material-symbols-rounded text-sm my-auto me-1">schedule</i>
                <p class="mb-0 text-sm">Mis √† jour r√©cemment</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Doctorat -->
        <div class="col-lg-4 mt-4 mb-3">
          <div class="card">
            <div class="card-body">
              <h6 class="mb-0"> Th√®ses</h6>
              <div class="pe-2">
                <div class="chart">
                  <canvas id="chart-doctorat" class="chart-canvas" height="170"></canvas>
                </div>
              </div>
              <hr class="dark horizontal">
              <div class="d-flex">
                <i class="material-symbols-rounded text-sm my-auto me-1">schedule</i>
                <p class="mb-0 text-sm">Mis √† jour r√©cemment</p>
              </div>
            </div>
          </div>
        </div>
        <script th:inline="javascript">
          /*<![CDATA[*/
          var annees = /*[[${annees}]]*/ [];
          var licencesCounts = /*[[${licencesCounts}]]*/ [];
          var mastersCounts = /*[[${mastersCounts}]]*/ [];
          var thesesCounts = /*[[${thesesCounts}]]*/ [];
          /*]]>*/
        </script>

      </div>


      <footer class="footer py-4  ">
        <div class="container-fluid">
          <div class="row align-items-center justify-content-lg-between">
            <div class="col-lg-6 mb-lg-0 mb-4">
              <div class="copyright text-center text-sm text-muted text-lg-start">
                ¬© <script>
                    document.write(new Date().getFullYear())
                  </script>
                <a href="#" class="font-weight-bold" target="_blank">Universit√© Assane Seck de Ziguinchor</a>
                Tous droits r√©server.
              </div>
            </div>
            <div class="col-lg-6">
              <ul class="nav nav-footer justify-content-center justify-content-lg-end">
                <li class="nav-item">
                  <a href="https://uasz.sn" class="nav-link text-muted" target="_blank">UASZ</a>
                </li>
                <li class="nav-item">
                  <a href="https://www.bibliotheque.uasz.sn" class="nav-link text-muted" target="_blank">BU</a>
                </li>
                <li class="nav-item">
                  <a href="https://rivieresdusud.uasz.sn/" class="nav-link text-muted" target="_blank">Rivi√©re du Sud</a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link text-muted" target="_blank">A propos</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </main>

<!--   Core JS Files   -->
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/chartjs.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/material-dashboard.min.js?v=3.2.0"></script>

  <!-- Popup de notifications -->
  <div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="notificationModalLabel">üì¨ Notifications</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul class="list-group notification-list">
            <li th:each="notification : ${notifications}"
                class="list-group-item notification-item d-flex justify-content-between align-items-center"
                th:classappend="${notification.lue} ? '' : 'list-group-item-success'">
              <div class="notification-message">
                <span th:text="${notification.message}">Message de notification</span>
              </div>
              <div class="d-flex">
                <button class="btn btn-sm btn-success me-1 mark-read-btn"
                        th:attr="data-id=${notification.id}"
                        th:if="${!notification.lue}">Lue</button>
                <button class="btn btn-sm btn-danger delete-btn"
                        th:attr="data-id=${notification.id}">Supprimer</button>
              </div>
            </li>
            <li th:if="${notifications.isEmpty()}" class="list-group-item text-center">
              Aucune notification
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript pour les notifications -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Ouvrir le modal de notification
      document.getElementById('notificationBtn').addEventListener('click', function(e) {
        e.preventDefault();
        var notificationModal = new bootstrap.Modal(document.getElementById('notificationModal'));
        notificationModal.show();
      });

      // G√©rer le marquage comme lu
      document.querySelectorAll('.mark-read-btn').forEach(button => {
        button.addEventListener('click', function() {
          const id = this.getAttribute('data-id');
          const item = this.closest('.notification-item');

          // Requ√™te AJAX pour marquer comme lu
          fetch(`/notifications/api/lire/${id}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            }
          })
          .then(response => {
            if (response.ok) {
              // Mettre √† jour l'interface
              item.classList.remove('list-group-item-success');
              this.remove();

              // Mettre √† jour le compteur
              updateNotificationCount(-1);
            }
          });
        });
      });

      // G√©rer la suppression
      document.querySelectorAll('.delete-btn').forEach(button => {
        button.addEventListener('click', function() {
          const id = this.getAttribute('data-id');
          const item = this.closest('.notification-item');

          // Requ√™te AJAX pour supprimer
          fetch(`/notifications/api/supprimer/${id}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            }
          })
          .then(response => {
            if (response.ok) {
              // Supprimer de l'interface
              item.remove();

              // V√©rifier s'il reste des notifications
              const remainingItems = document.querySelectorAll('.notification-item').length;
              if (remainingItems === 0) {
                const emptyMessage = document.createElement('li');
                emptyMessage.className = 'list-group-item text-center';
                emptyMessage.textContent = 'Aucune notification';
                document.querySelector('.notification-list').appendChild(emptyMessage);
              }

              // Mettre √† jour le compteur
              updateNotificationCount(-1);
            }
          });
        });
      });

      // Fonction pour mettre √† jour le compteur
      function updateNotificationCount(change) {
        const countElement = document.querySelector('.notification-count');
        let count = parseInt(countElement.textContent);
        count += change;

        if (count <= 0) {
          countElement.style.display = 'none';
          countElement.textContent = '0';
        } else {
          countElement.style.display = '';
          countElement.textContent = count;
        }
      }
    });
  </script>

  <!-- CSS pour les notifications -->
  <style>
    .notification-count {
      position: absolute;
      top: 0;
      right: 5px;
      background-color: #dc3545;
      color: white;
      border-radius: 50%;
      font-size: 12px;
      width: 18px;
      height: 18px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .nav-item {
      position: relative;
    }

    .notification-item {
      transition: all 0.3s ease;
    }
  </style>



</body>

</html>